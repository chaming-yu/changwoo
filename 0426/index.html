<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<!--api를 받아와서 프론트에 뿌려주는것-->
<body>
    <!-- displayPosts의 타겟이 되는 id를 가진 HTML div 태그 -->
    <div id="post-container"></div> 

    <script type="module">
        //db라고 하는 가상의 database 혹은 backend 에서 데이터 덩어리를 불러오는 코드
        import { posts } from './db.js'

        // post-container라는 id를 가진 HTML 태그를 object화 시켜서 변수에 저장함
        const postContainer = document.querySelector('#post-container');

        // db에서 가져온 posts 데이터 덩어리들을 foreach문으로 하나하나 풀어 쓰면서,
        // title, content 등의 내용을 담고 있는 post들을 postContainer object에 넣는다
        function displayPosts() {
            for (const post of posts) { // posts를 post라고 하는 변수로 풀어서 반복한다 
                const postElement = createPostElement(post); // createPostElement 라고 하는 커스텀 function에 post를 넣고, 그 결과값을 postElement로 받는다.
                postContainer.appendChild(postElement); // postElement를 postContainer에 집어넣는다. 실제적으로 HTML코드 내부에 새로운 postElement가 생성됌 
            }
        }

        function createPostElement(post) {

            //post 라는 클래스 이름을 가진 div HTML 태그를 만든다.
            const postElement = document.createElement('div');
            postElement.className = 'post';

            // post-title 라는 P 태그를 만들고, 그 안에 내용(innerText)를 함수 매개변수로 받아온 post의 title를 넣는다.
            const title = document.createElement('p');
            title.className = 'post-title';
            title.innerText = `제목: ${post.title}`;
            postElement.appendChild(title); // 만들어진 title을 나중에 반환할 postElement에 넣는다.

            const content = document.createElement('p');
            content.className = 'post-content';
            content.innerText = `내용: ${post.content}`;
            postElement.appendChild(content);

            const author = document.createElement('p');
            author.className = 'post-author';
            author.innerText = `작성자: ${post.author}`;
            postElement.appendChild(author);

            const image = document.createElement('img');
            image.className = 'post-image';
            image.src = post.imageUrl;
            postElement.appendChild(image);

            // displayPosts 함수 내부에서 postElement 변수에 넣을 postElement 값을 반환한다.
            return postElement;
        }

        //만든 displayPosts 함수를 실행한다. 
        displayPosts();
    </script>
    <style>
        .post {
            border: 1px solid #000;
            padding: 20px;
            margin: 10px;
        }

        .post>* {
            margin-bottom: 0.5rem;
        }

        .post-content {
            white-space: pre-wrap;
        }

        .post-image {
            max-width: 250px;
            height: auto;
        }

        .post-title {
            font-size: 1.5rem;
        }
    </style>
</body>

</html>